!function(e){{var t=Backbone.Model.extend({defaults:function(){return{name:"",image:"",author:"",price:""}}}),i=Backbone.Collection.extend({model:t,url:"/douban/books"}),o=new i,n=Backbone.Collection.extend({el:e("#book-list"),template:_.template(e("#book-summary-item-template").html()),events:{"click .book-item-overview":""},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.el.html(this.template(this.model.toJSON())),this}}),s=Backbone.View.extend({el:"#main",bookList:e("#book-list"),initialize:function(){this.listenTo(o,"reset",this.showBookList),this.listenTo(o,"all",this.render),this.main=e("#main"),o.fetch()},showBookItem:function(e){var t=new n({model:e});this.bookList.append(t.render().el)},showBookList:function(){o.each(this.showBookItem,this)},render:function(){o.length?this.main.show():this.main.hide()}});new s}}(jQuery);